<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<h1 style="margin-bottom: auto">Fuel consumption records for specified month</h1>
<div>
    Choose Month: <input type="number" onkeypress="return false;" id="month" min="1" max="12" value="1"/><br>
    <input type="radio" name="radio1" checked onclick="checkClick(0)"/>All Drivers<br>
    <input type="radio" name="radio1" onclick="checkClick(1)"/><label id="radio1">Specific driver</label><br>
    <input type="submit" value="Submit" onclick="submit(1)"/>
</div>

<h1 style="margin-bottom: auto">Total money spent</h1>
<div>
    <input type="radio" name="radio2" checked onclick="checkClick(0)"/>All Drivers<br>
    <input type="radio" name="radio2" onclick="checkClick(2)"/><label id="radio2">Specific driver</label><br>
    <input type="submit" value="Submit" onclick="submit(2)"/>
</div>

<h1 style="margin-bottom: auto">Statistics for each month</h1>
<div>
    <input type="radio" name="radio3" checked onclick="checkClick(0)"/>All Drivers<br>
    <input type="radio" name="radio3" onclick="checkClick(3)"/><label id="radio3">Specific driver</label><br>
    <input type="submit" value="Submit" onclick="submit(3)"/>
</div>

<h1 style="margin-bottom: auto">Add Driver</h1>
<div>
    Enter Driver ID: <input type="number" id="driverID" min="1" value="1"/><br>
    Enter Fuel Type: <input type="text" id="fuelType" placeholder="95"/><br>
    Enter Price per Liter: <input type="number" step="0.01" id="price" min="0" placeholder="1.99"/><br>
    Enter Liters Filled: <input type="number" step="0.01" id="liters" min="0" placeholder="10.00"/><br>
    Enter Date: <input type="date" id="date" placeholder="01/01/2000"/><br>
    <input type="submit" value="Submit" onclick="addDriver()"/>
</div>
<script type="text/javascript">
    var userSelectedRequestType = 0;

    function checkClick(clickedBtn) {
        if(clickedBtn == 0) {
            userSelectedRequestType = 0;
        }
        else {
            var insertedDriverID = parseInt(prompt("Please Enter driverID:"));
            if(insertedDriverID.toString() == "NaN" || insertedDriverID.toString() == "")
            {
                alert("Please enter a valid Driver ID!");
            }
            else
            {
                document.getElementById("radio" + clickedBtn.toString()).innerHTML = "Specific driver (" + insertedDriverID.toString() + ")";
                userSelectedRequestType = insertedDriverID;
            }
        }
    }

    function submit(request) {
        var month = document.getElementById("month").value;
        if(month.toString().length == 1) {
            month = "0" + month;
        }
        else if(month == "") {
            month = "01";
        }

        window.location = "/resultFuel?driverID=" + userSelectedRequestType + "&month=" + month + "&submit=" + request;

        /*if(request > 1 && userSelectedRequestType == 0) {
            window.location = "/result?submit=" + request;
        }
        else if(request > 1 && userSelectedRequestType > 0) {
            window.location = "/result?driverID=" + userSelectedRequestType + "&submit=" + request;
        }
        else if(userSelectedRequestType == 0) {
            window.location = "/result?month=" + month + "&submit=" + request;
        }
        else {
            window.location = "/result?driverID=" + userSelectedRequestType + "&month=" + month + "&submit=" + request;
        }*/
    }
    function addDriver() {

        var driverID = document.getElementById("driverID").value;
        var fuelType = document.getElementById("fuelType").value;
        var price = document.getElementById("price").value;
        var liters = document.getElementById("liters").value;
        var date = document.getElementById("date").value;

        var data = {
            driverID: driverID,
            fuelType: fuelType,
            price: price,
            liters: liters,
            date: date
        };

        var json = JSON.stringify(data);

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/api");
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.send(json);
        alert("Driver: '" + driverID + "' added to database!");
    }
</script>
</body>
</html>